<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="Totoro.WinUI.Media.Flyleaf.FlyleafTransportControls"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:help="using:Totoro.WinUI.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:uc="using:Totoro.WinUI.UserControls"
    mc:Ignorable="d">

    <Grid Background="#A3000000">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid Margin="8,0,8,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>

            <!--  Current Time | Slider | Duration  -->
            <TextBlock
                Grid.Column="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Text="{x:Bind help:Converters.TicksToTime(Player.CurTime), Mode=OneWay}" />

            <Slider
                Grid.Column="1"
                Margin="10,0,10,0"
                VerticalAlignment="Center"
                IsTabStop="False"
                Maximum="{x:Bind help:Converters.TiksToSeconds(Player.Duration), Mode=OneWay}"
                Value="{x:Bind help:Converters.TiksToSeconds(Player.CurTime), BindBack=help:Converters.SecondsToTicks, Mode=TwoWay}" />

            <TextBlock
                Grid.Column="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Text="{x:Bind help:Converters.TicksToTime(Player.Duration), Mode=OneWay}" />
        </Grid>

        <Grid Grid.Row="1" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal">
                <Button
                    x:Name="SkipBackwardButton"
                    Click="SkipBackwardButton_Click"
                    IsTapEnabled="False">
                    <FontIcon Glyph="&#xED3C;" />
                </Button>
                <Button
                    x:Name="PreviousTrackButton"
                    IsTabStop="False"
                    Visibility="{x:Bind help:Converters.BooleanToVisibility(IsPreviousTrackButtonVisible), Mode=OneWay}">
                    <SymbolIcon Symbol="Previous" />
                </Button>
                <Button
                    x:Name="PlayPauseButton"
                    Command="{x:Bind Player.Commands.TogglePlayPause}"
                    IsEnabled="{x:Bind Player.CanPlay, Mode=OneWay}"
                    IsTabStop="False">
                    <SymbolIcon x:Name="PlayPauseSymbol" Symbol="Play" />
                </Button>
                <Button
                    x:Name="NextTrackButton"
                    IsTabStop="False"
                    Visibility="{x:Bind help:Converters.BooleanToVisibility(IsNextTrackButtonVisible), Mode=OneWay}">
                    <SymbolIcon Symbol="Next" />
                </Button>
                <Button
                    x:Name="CCSelectionButton"
                    IsTabStop="False"
                    Visibility="{x:Bind help:Converters.BooleanToVisibility(IsCCSelectionVisible), Mode=OneWay}">
                    <FontIcon Glyph="&#xED1E;" />
                </Button>
                <Button
                    x:Name="SkipForwardButton"
                    Click="SkipForwardButton_Click"
                    IsTapEnabled="False">
                    <FontIcon Glyph="&#xED3D;" />
                </Button>
                <Button x:Name="PlaybackRateButton" IsTabStop="False">
                    <FontIcon Glyph="&#xEC58;" />
                </Button>
                <Button x:Name="SubmitTimeStampButton">
                    <SymbolIcon Symbol="Clock" />
                </Button>
                <Button x:Name="QualitiesButton">
                    <FontIcon Glyph="&#xe93e;" />
                </Button>
                <Button x:Name="SkipIntroButton">
                    <FontIcon Glyph="&#xec4f;" />
                </Button>
            </StackPanel>

            <TextBlock
                Grid.Column="1"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                FontSize="16"
                Text="{x:Bind Player.Playlist.Selected.Title, Mode=OneWay}" />

            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <Slider
                    Width="100"
                    IsTabStop="False"
                    Maximum="{x:Bind Player.Config.Player.VolumeMax, Mode=OneWay}"
                    Value="{x:Bind Player.Audio.Volume, Mode=TwoWay}" />
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
